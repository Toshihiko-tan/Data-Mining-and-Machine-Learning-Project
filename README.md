# STATS-415-Final-Project
 STATS 415 Final Project by Michael Williams, Nikhil Dayal, Samuel Tan, & Sarah Lim at the University of Michigan. The project is an investigation into factors influencing household poverty levels in the U.S., utilizing lasso regression, random forest trees, and cross-validation on CDC demographics data.
```
OpenExplorationReport‚ÄîSTATS 415 FinalProject
MichaelWilliams,NikhilDayal,SamuelTan,SarahLim
```
**I. Introduction**
IntheUnitedStates,thereexistsadiversespectrumofeconomiccircumstances,ranging
fromindividualsbelowthepovertylinetothosewithlowincomes,andthosethatdonotfallinto
eithercategory.Thedisparitybetweenincomelevelsresultsfromanintricateinterplayofvarious
factors,suchaseducationalachievements,numberofmembersinahousehold,andhealth
outcomes.Thus,investigatingthefactorsthatwieldsubstantialinfluenceonahousehold's
povertylevelisparamountincomprehendingthediverseeconomiclandscape.

Thisreportstrivestoanswertwoquestionsregardingthecomplexitiesofeconomic
well-being:1)whichdemographicandhealth-relatedpredictorsdonotinfluenceone‚Äôsincome
leveland2)whatthekeydeterminantsthatsignificantlycontributetodisparitiesinpoverty
statusare.OurresponsevariablewillbeINDFMPIR(ratiooffamilyincometopoverty)and
income_level,whichisacategoricalvariablewedefined.Wewillexplainmoreaboutour
responsevariablesinthenextsection.

Weachievethisthroughtheuseofthreedifferentstatisticalmethods‚Äìlassoregression,
randomforesttrees,andcross-validation‚ÄìonpublicdemographicsdatacollectedbytheCDC.
Specifically,thefirstquestionwillbeansweredvialassoregression‚Äôsabilitytofacilitatevariable
selection,whichdeterminesthelessinfluentialpredictors.Thesecondquestionwillbeexplored
withrandomforesttreesthathelpidentifythemostsignificantinfluencesinprediction.

**II. Data**
Thedatausedinthisexplorationisthe2017-2018demographicinformation,sourced
fromtheNationalHealthandNutritionExaminationSurvey(NHANES)^1 .Specifically,the
datasetconsistsofavarietyofvariablesrelatedtoparticipants'characteristics,suchasage,
gender,race/ethnicity,education,andhouseholdincome.Theoriginaldatasetcontainedseveral
missingvalues,representedby‚Äò.‚Äôandinformationwhichparticipantswerenotwillingorfailed
todisclose,representedby‚Äò9,‚Äô‚Äò7,‚Äô‚Äò99,‚Äôor‚Äò77‚Äôdependingonvariables;forthepurposeofthis
exploration,allthevariableswithmorethan 1250 missingrecordswereomitted.

Furtherprocessingthedata,weconvertedallcategoricalfeaturesintofactorvariables,
beingmindfulnottoconvertquantitativevariables.Wealsoscaledallnumericalvariablesto
haveameanof 0 andavarianceof1,becauseallthenumericalvariablesinthedatasetareon
differentscales.Wealsodroppedvariablesthatwouldhavenocorrelationwiththeresponse,
suchasRIDSTATR(‚ÄúInterview/ExaminationStatus‚Äù),asthesevariablestendtobe
housekeepingdata.Thefulllistofthesehousekeepingvariablesweremovedare:"SEQN",

(^1) https://wwwn.cdc.gov/Nchs/Nhanes/2017-2018/DEMO_J.htm#DMDHHSZE


## "RIDSTATR","RIDEXMON","SIAPROXY","SIAINTRP","FIAPROXY","FIAINTRP",

"WTINT2YR","WTMEC2YR","SDMVPSU", and"SDMVSTRA."Thereisonehousekeeping
variableswhichwedecidedtokeep,namelySIALANG,thisvariablerepresentthelanguagethat
wasusedtocarryoutthesurvey.Webelievethatthesetwovariablesarerepresentativeofthe
interviewees‚ÄôEnglishskills,whichmightberelativetotheirincome,sowedecidedtokeepthese
twovariables.

Wealsowanttonotethatwewon‚ÄôtbeusingINDHHIN2andINDFMIN2inour
statisticalanalysis.Ourresponsevariablesarehighlydependentonthesetwovariables,and
ExploratoryDataAnalysisshowedaveryhighcorrelationbetweenthesetwovariablesandour
responsevariableratiooffamilyincometopoverty.Exploringthesetwovariablesgaveusa
goodimpressionofthedistributionoffamilyandhouseholdincomeinourdataset,butour
questionsareconcernedaboutotherfactorsthatcanaffectthefamilyincome.Therefore,we
haveremovedthesetwovariablesfromthedataset,aswewon‚Äôtbeusingthesevariablesinthe
followingsections.

Tobetterunderstandthedifferentincomegroupsinourdatasetandfacilitateassigning
participantsintodifferentincomegroups,wehavealsocreatedanabstractionofthevariable
INDFMPIR(ratiooffamilyincometopoverty)touseasourresponsevariable.Todothis,we
createdanothercolumninthedatasetcalledincome_level,andhadthiscolumntakethevalue0,
1,or 2 whenINDFMPIRwaslessthanorequalto 1 (poverty),between 1 and 2 (lowincome),
andgreaterthan 2 (sustainableincome),respectively.Afterdatacleaningandaddinganextra
column,weareleftwith 7164 observationsof 17 variables.

Belowarevisualizationsofsomevariablesinourdataset:

```
Figure1:NumberofChildrenPerHousehold,byAgeGroup
```

Wecanseefromtheplotsabovethatmostoftheparticipantsinourdatasethaveno
childrenintheirhouseholds,either 5 yearsoryoungeror6-17yearsold,followedbyhouseholds
with 1 childof 5 yearsoryoungeror6-17yearsold,then 2 childrenand 3 ormorechildren.This
givesusabasicoverlookofthegeneralfamilystructureoftheparticipantsinthedataset.

```
Figure2:Boxplotofgenderbyratiooffamilyincometopoverty
```
Thepresentedboxplotillustratesthedistributionoftheratiooffamilyincometopoverty
categorizedbygender.Notably,themedian,1stquartile,and3rdquartilevaluespertainingtothe
aforementionedratioareobservedtobenearlyindistinguishablebetweenthemaleandfemale
groups.Thisparityimpliesthatgendermaynotexhibitastatisticallysignificantinfluenceonan
individual'sincomelevelwithinthecontextofthisanalysis.Wewouldbeexploringthis
relationshipfurtherinthefollowingsections.

```
Figure3:IncomeLevelDistribution
```

Thevisualrepresentationabovedepictsourtworesponsevariables.Ontheleft,most
participantsfallintothesustainableincomecategory,withasmallerproportioninlow-income
andpoverty.Thisdistributionisinfluencedbyourdefinition,classifyingparticipantswitha
familyincome-to-povertyratioabove2.0assustainableincome.Theright-sidedplotindicatesa
concentrationofparticipantswithafamilyincome-to-povertyratioof5,asallvaluesequaltoor
exceeding 5 weresetto 5 inthedataset.Tofacilitatemodelfitting,weproposeexcluding
high-incomeparticipants,definedasthosewitharatioof 5 orhigher,despitepotential
informationloss.Ourfocusisonunderstandingfactorsimpactinglow-incomeandimpoverished
groups.Afterremovinghigh-incomeparticipants,aslightrightwardskewnessisevidentinthe
distributionofthefamilyincome-to-povertyratio.

**III. Methods**
Aspreviouslymentioned,thefirststatisticalmethodusedinthisexplorationistheL
regularization,orLASSO,whichcansimultaneouslyperformparameterestimationandvariable
selectionbyintroducingapenaltyterm.WewillbefittingLASSOwiththeoriginalINDFMPIR
values(excludingvaluesthatareequalto5)astheresponse,andalltheothervariablesexcept
thevariableincome_levelasthepredictor.Therearesomecategoricalvariablesinourdataset,
butwehavechangeditintofactorsinthedatasectionpartofthereport,sodummyvariableswill
beusedtofittheLASSOmodel.SincetheoriginalINDFMPIRvaluesarecontinuous
quantitativevariables,wecanfitaLASSOmodeltopredictthevalues.AsseeninISLR2^2 ,the
LASSOcoefficientsminimizethequantity

```
ùëñ= 1
```
```
ùëõ
‚àë(ùë¶ùëñ‚àíŒ≤ 0 ‚àí
ùëó= 1
```
```
ùëù
‚àëŒ≤ùëóùë•ùëñùëó)^2 + Œª
ùëó= 1
```
```
ùëù
‚àë|Œ≤ùëó| = ùëÖùëÜùëÜ + Œª
ùëó= 1
```
```
ùëù
‚àë|Œ≤ùëó|
```
Thepenaltyterm,controlledbyatuningparameterŒª,inducesshrinkageofsome
coefficientstowardszeroandencouragessparsityinthemodel.Thisfeaturefacilitatesvariable
selection,allowingustofocusonasubsetofthevariableswiththemostsubstantialimpactin
predictingtheresponsevariable,whichcaninturnhelpustoanswerthequestionsweproposed
inthebeginning.Sincetheoriginaldatasetcontainsmorethan 15 predictors,itisimportantto
knowwhichvariablesaresignificantinpredictingtheresponsevariable(ratiooffamilyincome
topoverty)andexcludinglessinfluentialvariables.

Anotherusefulstatisticaltoolusedinthisexplorationisrandomforest.Byleveragingan
ensembleofdecisiontrees,randomforestscaneffectivelycapturecomplexrelationshipsand
interactionsamongpredictors.Fortherandomforest,wewillbeusingthecategoricalvariable
wecreated,income_level,asresponse,andalltheothervariablesexceptINDFMPIR,the
originalpovertyratiovalues,aspredictors.Recallthatincome_levelisacategoricalvariable

(^2) G.James,D.Witten,T.Hastie,R.Tibshirani(2013).AnIntroductiontoStatisticalLearningwithApplicationsin
R.SecondEdition.Springer.


withthreelevels:‚Äúimpoverished,‚Äù‚Äúlow-income,‚Äùand‚Äúsustainable,‚Äùpredictingincome_level
basedonothervariableswillbeaclassificationproblem,whichistheperfectfitforrandom
forest.Thenatureofthismethodenablesustorankthepredictorsbasedontheirimportancein
contributingtothepredictivepowerofthemodel.Thevariablesthatconsistentlycontributeto
accuratepredictionsacrossdifferenttreesareassignedhigherimportancescores.Thisiswhat
makesrandomforestsapowerfultool,asitnotonlyfacilitatestheidentificationofkey
predictorsbutalsooffersinsightsintotherelativeimpactofvariablesontheresponsevariable.

Cross-validationisemployedtoselecttheregularizationparameterinlasso.Inthe
contextofLassoregression,cross-validationassistsinidentifyingtheoptimalŒªvaluethat
balancesmodelcomplexityandpredictiveaccuracy.Itallowsforacomprehensiveassessmentof
themodel‚Äôsabilitytogeneralizetonewdata,helpingpreventoverfittingandensuringthatthe
selectedparameteriswell-suited.

**IV. Results**
Weuseda5-foldcross-validationtoselectaŒªof0.001754996.Afterrunningthelasso
regressiononthedata,notably,twofeatureshaditscoefficientdroppedto0,RIAGENDR
(dummyvariableforfemalegender)andRIDAGEYR(ageofparticipant).

```
Figure4:PenalizedCoefficientsforeachvariableinLASSORegression
```
Whileonlythedummyvariableforfemalegender‚Äôscoefficientwassettozero,the
dummyvariableformalegenderwasalsoverylow,whichisinlinewiththerelationshipwe
exploredintheExploratoryDataAnalysis,presentedasFigure2.Thus,wechosetodrop
RIAGENDRentirely. Welikelywouldhaveseenmorefeaturesgetdroppedhadwenotcleaned


thedatainourpreprocessingphase.Thelowlambdavaluerepresentsaweakerpenalty,which
mayhavehurtourfeatureselectionasthelambdamaynothavebeensufficientlylargeenoughto
imposeaheavierpenaltyandfilteroutmorefeatures.ThisleftuswiththevariablesRIDAGEYR
(ageattimeofscreening),RIDRETH3(Race/HispanicOriginw/Non-HispanicAsian),
DMDBORN4(CountryofBirth),DMDCITZN(CitizenshipStatus),SIALANG(Languageof
SamplePersonInterview),DMDHHSIZ(TotalNumberofPeopleinHousehold),DMDFMSIZ
(TotalNumberofPeopleinFamily),DMDHHSZA(#ofchildren 5 YearsofYoungerin
Household),DMDHHSZB(#ofChildren6-17YearsOldinHousehold),DMDHHSZE(#of
Adults 60 YearsorOlderinHousehold),DMDHRGND(HouseholdReferencePerson‚ÄôsGender),
DMDHRAGZ(HouseholdReferencePerson‚ÄôsAgeinYears),DMDHREDZ(Household
ReferencePerson‚ÄôsEducationLevel),&DMDHRMAZ(HouseholdReferencePerson‚ÄôsMarita
Status)ashavingthemostimpactonINDFMPIR.

Wethenranarandomforestmodelontheremainingvariables.Thefigurebelowshows
theorderofvariablesintermsoftheirimportanceinpredictingthehouseholdpovertylevel.

```
Figure5:RankofVariableImportanceinPredictingHouseholdPovertyLevel
```
ThemostimportantvariableselectedbyboththeRandomForestandLASSOmodelis
educationlevel.Itisacommonperceptionthatindividualswithhigherlevelsofeducationtend
tohavebetterjobopportunities,henceahigherlevelofincome.Therefore,itmakessensethat
one‚Äôseducationlevelhasasignificantimpactontheirpovertylevel.Whileourmaingoalis
interpretationofthemodel,wearealsointerestedinhowourmodelperformswithregardsto
predictingthefamilyincomestatus.Belowisaconfusionmatrix,whichrepresentstheaccuracy
ofourrandomforestmodel:


```
Figure 6: Random forest confusion matrix
```
The three large boxes positioned diagonally represent the correct predictions. Those
boxes are the largest out of all 9 boxes, which means our model performed fairly well in
predicting the correct household poverty level. In fact, the model showed a 0.86 accuracy in its
predictions^3. This suggests that our model (and thus its respective Gini Coefficients) are accurate.

**V. Conclusion**
In this comprehensive analysis, our objective was to discern potential influences on a
household's poverty level. The ensuing key findings and insights derived from our meticulous
analysis are succinctly summarized below.

At the outset of this report, we posited two overarching questions guiding our analysis:

1. **Identification of Non-Influential Predictors** : In addressing the first question, pertaining
    to demographic and health-related predictors that do not sway family income levels, we
    employed a LASSO model detailed in Part IV. Notably, the coefficient for RIAGENDR
    (Gender of the participant) and RIDAGEYR (age at time of screening) were set to zero,
    signifying their insignificance in predicting the Ratio of family income to poverty. Thus,
    we contend that gender and age emerge as demographic predictors with negligible
    influence on one's family income level.
2. **Key Determinants of Poverty Disparities** : The second question delved into the key
    determinants contributing significantly to disparities in poverty status. In the same section

(^3) See attached code for calculations.


```
ofthereport(PartIV),arandomforestmodelwasfittedtopredictparticipants'income
status.TheinclusionofameandecreaseGiniplot,whichgaugesthecontributionofeach
variabletothehomogeneityofnodesandleavesintheresultingrandomforest,revealed
thatDMDHREDZ(educationlevelatthetimeofscreening)scoredthehighestGini
values.Thisunderscoresitsparamountimportanceinpredictingfamilyincomestatus,
suggestingthateducationlevelhelpstopredictdisparitiesinpovertystatuswithinour
dataset.Thus,wecontendthateducationlevelcontributessignificantlytodisparitiesin
povertystatus.
```
```
Itisincumbentuponustoacknowledgethelimitationsintrinsictoouranalysis.Onesuch
limitationarisesfromthedataset'scollectionmethodology.Thedata,sourcedfromtheCDC,
introducedaconstraintinitsgenderclassificationbyutilizingabinaryframework(maleand
female).Consequently,ourinsightsarecircumscribed,lackingnuanceforindividualsoutsidethe
traditionalgenderbinary.Additionally,thetemporalconstraintofourdata,collectedduring
2017-2018,necessitatesconsideration.TheonsetoftheCOVID-19pandemicin 2019 renders
someofourconclusionspotentiallyobsolete.
```
```
VI. Contributions
‚óè Michael:Fittedthemodelandtunedtheparameters
‚óè Nikhil:Interpretedthemodelandwroteoutthereport
‚óè Samuel:Visualizationandanalysisofthedata
‚óè Sarah:Experimentingonmodelsandwroteoutthereport
```
**VII. Reproducibility**
Thissectionoutlinesthestepsanddetailsrequiredtoreproducetheanalysispresentedin
thisreport.TheanalysiswasconductedusingR,andtheprimarylibrariesincluderandomforest
(forrandomforestmodel),glmnet(forLASSOmodel),andtidyverse(forvisualizationofthe
data).TherawdatasetwasobtainedfromCDC‚Äôs‚ÄúDemographicVariablesandSampleWeights
2017-201‚Äù,anddatacleaningwasperformedasdescribedinthe‚ÄúData‚Äùsectionabove.

```
Toachieveresultreproducibility,arandomseedof 42 wasusedthroughouttheanalysis.
Followingtheoutlinedstepsinthe‚ÄúMethods‚Äùsectionabovewillproducethesamekeyresults,
suchasthebestlambdaforlassochosenbycrossvalidationandtheresultsofrandomforest.The
completecodeisinanattachedrmdfileforeasyreplication.Runningthermdfileshould
reproducetheresultsmentionedearlier,ensuringthereport'sreproducibility.
```

